{"components":{"requestBodies":{"PostDeviceRequest":{"content":{"application/json":{"schema":{"properties":{"subject":{"$ref":"#/components/schemas/Device"}}}}},"description":"Request used for creating a new Certificate Authority","required":true}},"responses":{"DeleteRevokeResponse":{"content":{"application/json":{"schema":{}}},"description":"Response returned back after revoking a device."},"DeviceResponse":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Device"}}},"description":"Response returned back after creating a device."},"ErrorResponse":{"content":{"application/json":{"schema":{"properties":{"error":{"type":"string"}}}}},"description":"Response when errors happen."},"GetDeviceCertHistoryResponse":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeviceCertHistory"}}},"description":"Response returned back after getting certificate history of a device."},"GetDeviceCertResponse":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeviceCert"}}},"description":"Response returned back after getting certificate of a device."},"GetDeviceLogsResponse":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/DeviceLog"},"type":"array"}}},"description":"Response returned back after getting logs of a device."},"GetDeviceResponse":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Device"},"type":"array"}}},"description":"Response returned back after creating a device."},"GetDmsLastIssueCertResponse":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeviceCertHistory"}}},"description":"Response returned back after getting last iisued certificate of a device."},"HealthResponse":{"content":{"application/json":{"schema":{"properties":{"healthy":{"type":"boolean"}}}}},"description":"Response returned back after healthchecking."}},"schemas":{"Device":{"properties":{"alias":{"type":"string"},"common_name":{"type":"string"},"country":{"type":"string"},"creation_timestamp":{"type":"string"},"current_cert_serial_number":{"type":"string"},"dms_id":{"type":"integer"},"id":{"type":"string"},"key_bits":{"type":"integer"},"key_strength":{"type":"string"},"key_type":{"type":"string"},"locality":{"type":"string"},"organization":{"type":"string"},"organization_unit":{"type":"string"},"state":{"type":"string"},"status":{"type":"string"}},"type":"object"},"DeviceCert":{"properties":{"common_name":{"type":"string"},"country":{"type":"string"},"crt":{"type":"string"},"device_id":{"type":"string"},"issuer_name":{"type":"string"},"locality":{"type":"string"},"organization":{"type":"string"},"organization_unit":{"type":"string"},"serial_number":{"type":"string"},"state":{"type":"string"},"status":{"type":"string"},"valid_from":{"type":"string"},"valid_to":{"type":"string"}},"type":"object"},"DeviceCertHistory":{"properties":{"creation_timestamp":{"type":"string"},"device_id":{"type":"string"},"issuer_name":{"type":"string"},"issuer_serial_number":{"type":"string"},"serial_number":{"type":"string"},"status":{"type":"string"}},"type":"object"},"DeviceLog":{"properties":{"device_id":{"type":"string"},"id":{"type":"string"},"log_message":{"type":"string"},"log_type":{"type":"string"},"timestamp":{"type":"string"}},"type":"object"}}},"info":{"contact":{"url":"https://github.com/lamassuiot"},"description":"REST API used for interacting with Lamassu Device Manager","license":{"name":"MPL v2.0","url":"https://github.com/lamassuiot/lamassu-compose/blob/main/LICENSE"},"title":"Lamassu Device Manager API","version":"0.0.0"},"openapi":"3.0.0","paths":{"/v1/devices":{"get":{"description":"Get Devices","operationId":"GetDevices","responses":{"200":{"$ref":"#/components/responses/GetDeviceResponse"},"400":{"$ref":"#/components/responses/ErrorResponse"},"401":{"$ref":"#/components/responses/ErrorResponse"},"403":{"$ref":"#/components/responses/ErrorResponse"},"500":{"$ref":"#/components/responses/ErrorResponse"}}},"post":{"description":"Post Device","operationId":"PostDevice","requestBody":{"$ref":"#/components/requestBodies/PostDeviceRequest"},"responses":{"200":{"$ref":"#/components/responses/DeviceResponse"},"400":{"$ref":"#/components/responses/ErrorResponse"},"401":{"$ref":"#/components/responses/ErrorResponse"},"403":{"$ref":"#/components/responses/ErrorResponse"},"500":{"$ref":"#/components/responses/ErrorResponse"}}}},"/v1/devices/dms-cert-history/last-issued":{"get":{"description":"Get Dms Cert History of last Thirty Days","operationId":"GetDmsLastIssueCert","responses":{"200":{"$ref":"#/components/responses/GetDmsLastIssueCertResponse"},"400":{"$ref":"#/components/responses/ErrorResponse"},"401":{"$ref":"#/components/responses/ErrorResponse"},"403":{"$ref":"#/components/responses/ErrorResponse"},"500":{"$ref":"#/components/responses/ErrorResponse"}}}},"/v1/devices/dms-cert-history/thirty-days":{"get":{"description":"Get Dms Cert History of last Thirty Days","operationId":"GetDmsCertHistoryThirtyDays","responses":{"200":{"$ref":"#/components/responses/GetDeviceCertHistoryResponse"},"400":{"$ref":"#/components/responses/ErrorResponse"},"401":{"$ref":"#/components/responses/ErrorResponse"},"403":{"$ref":"#/components/responses/ErrorResponse"},"500":{"$ref":"#/components/responses/ErrorResponse"}}}},"/v1/devices/{deviceId}":{"delete":{"description":"Delete Device By Id","operationId":"DeleteDevice","parameters":[{"in":"path","name":"deviceId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"$ref":"#/components/responses/StringResponse"},"400":{"$ref":"#/components/responses/ErrorResponse"},"401":{"$ref":"#/components/responses/ErrorResponse"},"403":{"$ref":"#/components/responses/ErrorResponse"},"500":{"$ref":"#/components/responses/ErrorResponse"}}},"get":{"description":"Get Device By Id","operationId":"GetDeviceById","parameters":[{"in":"path","name":"deviceId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"$ref":"#/components/responses/DeviceResponse"},"400":{"$ref":"#/components/responses/ErrorResponse"},"401":{"$ref":"#/components/responses/ErrorResponse"},"403":{"$ref":"#/components/responses/ErrorResponse"},"500":{"$ref":"#/components/responses/ErrorResponse"}}}},"/v1/devices/{deviceId}/cert":{"get":{"description":"Get Device Cert of deviceId","operationId":"GetDeviceCert","parameters":[{"in":"path","name":"deviceId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"$ref":"#/components/responses/GetDeviceCertResponse"},"400":{"$ref":"#/components/responses/ErrorResponse"},"401":{"$ref":"#/components/responses/ErrorResponse"},"403":{"$ref":"#/components/responses/ErrorResponse"},"500":{"$ref":"#/components/responses/ErrorResponse"}}}},"/v1/devices/{deviceId}/cert-history":{"get":{"description":"Get Device Cert History of deviceId","operationId":"GetDeviceCertHistory","parameters":[{"in":"path","name":"deviceId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"$ref":"#/components/responses/GetDeviceCertHistoryResponse"},"400":{"$ref":"#/components/responses/ErrorResponse"},"401":{"$ref":"#/components/responses/ErrorResponse"},"403":{"$ref":"#/components/responses/ErrorResponse"},"500":{"$ref":"#/components/responses/ErrorResponse"}}}},"/v1/devices/{deviceId}/logs":{"get":{"description":"Get Device Logs of deviceId","operationId":"GetDeviceLogs","parameters":[{"in":"path","name":"deviceId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"$ref":"#/components/responses/GetDeviceLogsResponse"},"400":{"$ref":"#/components/responses/ErrorResponse"},"401":{"$ref":"#/components/responses/ErrorResponse"},"403":{"$ref":"#/components/responses/ErrorResponse"},"500":{"$ref":"#/components/responses/ErrorResponse"}}}},"/v1/devices/{deviceId}/revoke":{"delete":{"description":"Delete Revoke device by Id","operationId":"DeleteRevoke","parameters":[{"in":"path","name":"deviceId","required":true,"schema":{"type":"string"}}],"responses":{"200":{"$ref":"#/components/responses/DeleteRevokeResponse"},"400":{"$ref":"#/components/responses/ErrorResponse"},"401":{"$ref":"#/components/responses/ErrorResponse"},"403":{"$ref":"#/components/responses/ErrorResponse"},"500":{"$ref":"#/components/responses/ErrorResponse"}}}},"/v1/health":{"get":{"description":"Get health status","operationId":"Health","responses":{"200":{"$ref":"#/components/responses/HealthResponse"}}}}},"servers":[{"description":"Current Server","url":"/"}]}